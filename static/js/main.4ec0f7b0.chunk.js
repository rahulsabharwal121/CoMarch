(this.webpackJsonpcomarch=this.webpackJsonpcomarch||[]).push([[0],{51:function(e,a,t){e.exports=t.p+"static/media/ui.97647e53.png"},52:function(e,a,t){e.exports=t.p+"static/media/google.1b943d72.png"},54:function(e,a,t){e.exports=t(83)},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){},81:function(e,a,t){},82:function(e,a,t){},83:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(39),r=t.n(l),o=(t(59),t(9)),s=(t(60),t(61),t(96)),i=t(43),m=t.n(i),u=t(44),d=t.n(u),h=t(45),E=t.n(h),p=Object(n.createContext)(),v=function(e){var a=e.reducer,t=e.initialState,l=e.children;return c.a.createElement(p.Provider,{value:Object(n.useReducer)(a,t)},l)},f=function(){return Object(n.useContext)(p)};var g=function(){var e=f(),a=Object(o.a)(e,1)[0].user;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__left"},c.a.createElement(s.a,{className:"header__avatar",alt:null===a||void 0===a?void 0:a.displayName,src:null===a||void 0===a?void 0:a.photoURL}),c.a.createElement(m.a,null)),c.a.createElement("div",{className:"header__search"},c.a.createElement(d.a,null),c.a.createElement("input",{placeholder:"Search"})),c.a.createElement("div",{className:"header__right"},c.a.createElement(E.a,null)))},b=(t(66),t(46)),_=t.n(b),N=t(47),O=t.n(N),j=(t(67),t(3)),S=t(20),I=t.n(S),C=I.a.initializeApp({apiKey:"AIzaSyD5NSqT2vYJoszxKe_j-bTEigqhWLBYfM8",authDomain:"comarch-c27dc.firebaseapp.com",databaseURL:"https://comarch-c27dc.firebaseio.com",projectId:"comarch-c27dc",storageBucket:"comarch-c27dc.appspot.com",messagingSenderId:"75509912384",appId:"1:75509912384:web:5b53e74955fd5c99f760a5",measurementId:"G-PCFMQG97GG"}).firestore(),w=I.a.auth(),y=new I.a.auth.GoogleAuthProvider,k=C;var G=function(e){var a=e.Icon,t=e.title,n=e.id,l=e.addChannelOption,r=Object(j.f)();return c.a.createElement("div",{className:"sidebarOption",onClick:l?function(){var e=prompt("Enter Channel Name");e&&k.collection("rooms").add({name:e})}:function(){n?r.push("/room/".concat(n)):r.push(t)}},a&&c.a.createElement(a,{className:"sidebarOption__icon"}),a?c.a.createElement("h3",null,t):c.a.createElement("h3",{className:"sidebarOption__channel"},c.a.createElement("span",{className:"sidebarOption__hash"},"#"),t))},x=t(48),D=t.n(x);var L=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],l=a[1],r=f(),s=Object(o.a)(r,1)[0].user;return Object(n.useEffect)((function(){k.collection("rooms").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,name:e.data().name}})))}))}),[]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement("div",{className:"sidebar__info"},c.a.createElement("h2",null,"CoMarch"),c.a.createElement("h3",null,c.a.createElement(_.a,null),null===s||void 0===s?void 0:s.displayName)),c.a.createElement(O.a,null)),c.a.createElement("hr",null),c.a.createElement(G,{className:"add",Icon:D.a,addChannelOption:!0,title:"Add channel"}),c.a.createElement("hr",null),t.map((function(e){return c.a.createElement(G,{title:e.name,id:e.id})})))},M=(t(79),t(49)),R=t.n(M),A=t(50),B=t.n(A);t(80);var T=function(e){var a=e.message,t=e.timestamp,n=e.user,l=e.userImg;return c.a.createElement("div",{className:"message"},c.a.createElement("img",{src:l,alt:"img"}),c.a.createElement("div",null,c.a.createElement("h4",null,n," ",c.a.createElement("span",{className:"message__timestamp"},new Date(null===t||void 0===t?void 0:t.toDate()).toUTCString())),c.a.createElement("p",null,a)))};t(81);var U=function(e){var a=e.channelName,t=e.channelId,l=Object(n.useState)(""),r=Object(o.a)(l,2),s=r[0],i=r[1],m=f(),u=Object(o.a)(m,1)[0].user;return c.a.createElement("div",{className:"ChatInput"},c.a.createElement("form",null,c.a.createElement("div",{className:"chat__message"},c.a.createElement("input",{className:"input__field",value:s,onChange:function(e){return i(e.target.value)}}),c.a.createElement("div",{className:"btn"},c.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),t&&(i(""),k.collection("rooms").doc(t).collection("messages").add({message:s,time:I.a.firestore.FieldValue.serverTimestamp(),user:u.displayName,userimg:u.photoURL}))}},"Message ",a)))))};var P=function(){var e=Object(j.g)().roomId,a=Object(n.useState)(null),t=Object(o.a)(a,2),l=t[0],r=t[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){e&&k.collection("rooms").doc(e).onSnapshot((function(e){r(e.data())})),k.collection("rooms").doc(e).collection("messages").orderBy("time","asc").onSnapshot((function(e){u(e.docs.map((function(e){return e.data()})))}))}),[e]),console.log(m),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement("div",{className:"chat__headerLeft"},c.a.createElement("h4",{className:"chat__channelName"},c.a.createElement("strong",null,"#",null===l||void 0===l?void 0:l.name),c.a.createElement(R.a,null))),c.a.createElement("div",{className:"chat__headerRight"},c.a.createElement("p",null,c.a.createElement(B.a,null),"Details"))),c.a.createElement("div",{className:"chat__messages"},m.map((function(e){var a=e.message,t=e.time,n=e.user,l=e.userimg;return c.a.createElement(T,{message:a,timestamp:t,user:n,userImg:l})}))),c.a.createElement(U,{channelName:null===l||void 0===l?void 0:l.name,channelId:e}))},W=(t(82),t(51)),z=t.n(W),F=t(33),J="SET_USER",q=function(e,a){switch(console.log(a),a.type){case J:return Object(F.a)(Object(F.a)({},e),{},{user:a.user});default:return e}},K=t(52),Y=t.n(K);var Q=function(){var e=f(),a=Object(o.a)(e,2),t=(a[0],a[1]);return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__container"},c.a.createElement("img",{src:z.a,alt:"logo"}),c.a.createElement("h1",null," CoMarch "),c.a.createElement("div",{className:"google__signin",onClick:function(e){w.signInWithPopup(y).then((function(e){t({type:J,user:e.user})})).catch((function(e){alert(e.message)}))}},c.a.createElement("h1",null,"Sign in with"),c.a.createElement("img",{src:Y.a,alt:"GOOGLE"}))))},V=t(25);var $=function(){var e=f(),a=Object(o.a)(e,2),t=a[0].user;return a[1],c.a.createElement("div",{className:"App"},c.a.createElement(V.a,null,t?c.a.createElement(c.a.Fragment,null,c.a.createElement(g,null),c.a.createElement("div",{className:"app__body"},c.a.createElement(L,null),c.a.createElement(j.c,null,c.a.createElement(j.a,{path:"/room/:roomId"},c.a.createElement(P,null)),c.a.createElement(j.a,{path:"/"})))):c.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,{initialState:{user:null},reducer:q},c.a.createElement($,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.4ec0f7b0.chunk.js.map